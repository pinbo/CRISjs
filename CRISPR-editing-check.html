<!DOCTYPE html>
<html>

<head>
	<title>CRISPR editing check</title>
	<style>
		body{
			margin: 0 auto;
			font-size: 12pt;    
			/*font-family: 'PT Serif', serif;*/
			line-height: 1.2;
			max-width: 8in;
			text-align: justify;
		}
	</style>
</head>

<body>
	<h1>CRISPR Editing Summary</h1>
	<h2>Please provide the requred sequences</h2>
	<p>Click the &quot;<strong>Clear</strong>&quot; button to clear the sample input. Click the &quot;<strong>Example input</strong>&quot; button to get the example inputs (then select the example fastq.gz files <a href='https://github.com/pinbo/CRISjs' target='_blank' class='url'>https://github.com/pinbo/CRISjs</a>).</p>
<p>After putting in the sequences and selecting fastq or fastq.gz files, click the &quot;<strong>Start Analyze</strong>&quot; button. Then download the summary file by clicking the &quot;<strong>Download output csv file</strong>&quot; button.</p>
<p style="color:red;">!!! Make sure both the left and the right flanking sequences are in the same read or merged read in the fastq file !!!</p>

	<label for="left">Your left flanking sequence:</label>
	<input id="left" name="LeftSequence" placeholder="a short sequence left of the gRNA" size="40"><br>
	<label for="right">Your right flanking sequence:</label>
	<input id="right" name="RightSequence" placeholder="a short sequence right of the gRNA" size="40"><br>
	<label for="grna">Your Guide RNA sequence:</label>
	<input id="grna" name="GuideRNA" placeholder="the gRNA sequence" size="40"><br>
	<label for="wt">Wild type sequence</label><br>
	<textarea id="wt" name="Wildtype" rows="5" cols="80" placeholder="The target gene sequences (long enough to include both the left and right flanking sequences)"></textarea>
	<br><br>
	<p id="demo"></p>
	<button onclick="clearseq()">Clear</button>
	<button onclick="putExample()">Example Input</button>
	<button onclick="getSeq()">Get intact sequence</button><br><br>
	<input type="file" id="files" name="files[]" multiple /><br><br>
	<button onclick="analyze()">Start Analyze</button>
	<select id="box1">
		<option value="F">Forward Strand</option>
		<option value="R">Reverse Strand</option>
	</select><br><br>
	<button style="visibility:hidden" id="download-btn" onclick="download()"> Download output csv file</button><br><br>
	<output id="output" style="visibility:hidden;"></output>

	<h2>Help</h2>
	<p id="help">
		This program summarize CRISPR editing results based on the idea of <a href="https://github.com/patrickc01/CRIS.py">CRIS.py</a>. You can read the paper <a href="https://www.nature.com/articles/s41598-019-40896-w">here</a>. The basic idea is summarized in its Fig. 1. 
	</p>
	<img src="images/CRISjs.png" alt="CRISjs dialog" width=100%>
	<p id="help2">
		All three sequences (the left and right flanking sequences and the gRNA sequences) should be on the <strong>same strand as the template</strong>. If you are working on polyploid species, your left or right flanking sequences should be unique to your template (subgenome) if the fastq files include homolog/homeologs.
	</p>
	<p id="help2">If you have a lot of fastq files, you may use the standalone command line program <a href="https://github.com/pinbo/CRISgo">CRISgo</a>.</p>


	<script src="libs/pako_inflate.min.js"></script>
	<script src="libs/FileSaver.min.js"></script>
	<script src="libs/crisjs-functions.js"></script>

</body>

</html>